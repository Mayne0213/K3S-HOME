# Kube State Metrics Helm Values
# Chart: https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-state-metrics

fullnameOverride: kube-state-metrics

resources:
  requests:
    cpu: 10m
    memory: 64Mi

service:
  type: ClusterIP
  clusterIP: None

# Prometheus ServiceMonitor 설정
prometheus:
  monitor:
    enabled: true
    additionalLabels:
      release: prometheus
    namespace: monitoring
    relabelings:
      - targetLabel: cluster
        replacement: "mayne-cluster"
    # exported_namespace를 namespace로 복사하여 모든 네임스페이스의 메트릭을 올바르게 표시
    metricRelabelings:
      - sourceLabels: [exported_namespace]
        targetLabel: namespace
        regex: (.+)
        replacement: ${1}
